var l=Object.defineProperty;var r=Object.getOwnPropertySymbols;var h=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable;var s=(e,t,n)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,o=(e,t)=>{for(var n in t||(t={}))h.call(t,n)&&s(e,n,t[n]);if(r)for(var n of r(t))c.call(t,n)&&s(e,n,t[n]);return e};import{c as d}from"./create.af6e9796.js";import{c as p}from"./zIndex.3656b1cc.js";import{c as u}from"./lock.a03ef939.js";/* empty css               */const v=e=>["top","bottom","right","left","center"].includes(e),m={value:{type:Boolean,default:!1},position:{type:String,default:"center",validator:v},overlay:{type:Boolean,default:!0},overlayClass:{type:String},overlayStyle:{type:Object},lockScroll:{type:Boolean,default:!0},closeOnClickOverlay:{type:Boolean,default:!0}};function y(){return{mounted(){window.addEventListener("hashchange",this.handleRouteChange),window.addEventListener("popstate",this.handleRouteChange)},beforeDestroy(){window.removeEventListener("hashchange",this.handleRouteChange),window.removeEventListener("popstate",this.handleRouteChange)}}}const{createComponent:f,namespace:a}=d("popup"),E=f({inheritAttrs:!1,mixins:[p("value"),u("value","lockScroll"),y()],props:m,watch:{value(e){this.$emit(e?"open":"close")}},methods:{hidePopup(){this.$emit("clickOverlay"),!!this.closeOnClickOverlay&&this.$emit("input",!1)},renderOverlay(){const e=this.$createElement,{overlayClass:t,overlayStyle:n}=this;return e("div",{class:[a("__overlay"),t],style:o({zIndex:this.zIndex-1},n),on:{click:this.hidePopup}})},renderContent(){return this.$createElement("div",{class:[a("__content"),a(`--${this.position}`)],style:{zIndex:this.zIndex},attrs:o({},this.$attrs)},[this.slots()])},handleAfterEnter(){this.$emit("opened")},handleAfterLeave(){this.$emit("closed")},handleRouteChange(){this.$emit("routeChange")}},render(){const e=arguments[0],{value:t,overlay:n,position:i}=this;return e("transition",{attrs:{name:"m-fade"},on:{afterEnter:this.handleAfterEnter,afterLeave:this.handleAfterLeave}},[e("div",{class:["m--box",a()],style:{zIndex:this.zIndex-2},directives:[{name:"show",value:t}]},[n&&this.renderOverlay(),e("transition",{attrs:{name:`m-pop-${i}`}},[t&&this.renderContent()])])])}});export{E as P};
