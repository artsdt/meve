var k=Object.defineProperty,$=Object.defineProperties;var S=Object.getOwnPropertyDescriptors;var u=Object.getOwnPropertySymbols;var _=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var m=(t,o,e)=>o in t?k(t,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[o]=e,d=(t,o)=>{for(var e in o||(o={}))_.call(o,e)&&m(t,e,o[e]);if(u)for(var e of u(o))O.call(o,e)&&m(t,e,o[e]);return t},f=(t,o)=>$(t,S(o));import{P as T}from"./index.503193fa.js";import{t as y,B as c}from"./index.3f9b7da1.js";import{I as w}from"./index.77d610ea.js";import{c as x}from"./create.d5ed34a6.js";/* empty css               */import{V as P}from"./vendor.b6844a64.js";import{j as A,c as D,b as I}from"./shared.c7f62d01.js";import{m as V}from"./components.b6372a71.js";const E=t=>["left","center","right"].includes(t),F={value:{type:Boolean,default:!1},width:{type:[String,Number]},title:{type:String},message:{type:String},messageAlign:{type:String,default:"left",validator:E},confirmButton:{type:Boolean,default:!0},cancelButton:{type:Boolean,default:!0},confirmButtonText:{type:String},cancelButtonText:{type:String},confirmButtonType:{type:String,default:"primary",validator:y},cancelButtonType:{type:String,default:"primary",validator:y},overlay:{type:Boolean,default:!0},overlayClass:{type:String},overlayStyle:{type:Object},lockScroll:{type:Boolean,default:!0},closeOnClickOverlay:{type:Boolean,default:!0},beforeClose:{type:Function}};const{createComponent:N,namespace:s}=x("dialog"),h=N({props:F,data:()=>({show:!1,localCloseOnClickOverlay:!1}),watch:{value:{handler(t){this.show=t},immediate:!0},closeOnClickOverlay:{handler(t){if(this.beforeClose){this.localCloseOnClickOverlay=!1;return}this.localCloseOnClickOverlay=t},immediate:!0}},methods:{handleOpen(){this.$emit("open")},handleOpened(){this.$emit("opened")},handleClose(){this.$emit("close")},handleClosed(){this.$emit("closed")},handleRouteChange(){this.$emit("route-change")},done(){this.$emit("input",!1)},handleClickOverlay(){if(this.$emit("click-overlay"),!!this.closeOnClickOverlay){if(this.beforeClose){this.beforeClose("close",this.done.bind(this));return}this.done()}},handleClickCloseButton(){if(this.beforeClose){this.beforeClose("close",this.done.bind(this));return}this.done()},confirm(){if(this.$emit("confirm"),this.beforeClose){this.beforeClose("confirm",this.done.bind(this));return}this.done()},cancel(){if(this.$emit("cancel"),this.beforeClose){this.beforeClose("cancel",this.done.bind(this));return}this.done()},renderMessage(){const t=this.$createElement;if(this.hasSlots())return this.slots();if(this.message)return t("div",{class:s("__message"),style:{textAlign:this.messageAlign}},[this.message])},renderTitle(){var o;const t=this.$createElement;return this.hasSlots("title")?this.slots("title"):t("div",{class:s("__title")},[(o=this.title)!=null?o:"\u63D0\u793A"])},renderFooter(){var o,e;const t=this.$createElement;return this.hasSlots("footer")?this.slots("footer"):t("div",{class:s("__footer")},[this.confirmButton&&t(c,{class:s("__confirm-button"),attrs:{"dialog-cover":!0,size:"large",type:this.confirmButtonType},on:{click:this.confirm}},[(o=this.confirmButtonText)!=null?o:"\u786E\u8BA4"]),this.cancelButton&&t(c,{class:s("__cancel-button"),attrs:{"dialog-cover":!0,size:"large",type:this.cancelButtonType,text:!0},on:{click:this.cancel}},[(e=this.cancelButtonText)!=null?e:"\u53D6\u6D88"])])}},render(){const t=arguments[0],{show:o,overlay:e,overlayClass:l,lockScroll:i,localCloseOnClickOverlay:n,handleOpen:C,handleOpened:p,handleClose:v,handleClosed:g,handleClickOverlay:B,handleRouteChange:b}=this;return t(T,{class:s(),attrs:{"dialog-cover":!0,value:o,overlay:e,overlayClass:l,lockScroll:i,closeOnClickOverlay:n},on:{open:C,opened:p,close:v,closed:g,clickOverlay:B,routeChange:b}},[t("div",{class:s("__container")},[t("div",{class:s("__title-wrapper")},[this.renderTitle(),t(c,{class:s("__close-button"),attrs:{"dialog-cover":!0,text:!0,round:!0},on:{click:this.handleClickCloseButton}},[t(w,{attrs:{name:"close"}})])]),this.renderMessage(),this.renderFooter()])])}});let r;function a(t){return A()?new Promise(o=>{a.close();const e=D(t)||I(t)?{message:String(t)}:t,{instance:l,unmount:i}=V(h,"body",{propsData:f(d({},e),{beforeClose:e.onBeforeClose})});l.value=!0,r=l,l.$on("input",n=>{l.value=n}),l.$on("open",()=>{var n;return(n=e.onOpen)==null?void 0:n.call(e)}),l.$on("opened",()=>{var n;return(n=e.onOpened)==null?void 0:n.call(e)}),l.$on("click-overlay",()=>{var n;return(n=e.onClickOverlay)==null?void 0:n.call(e)}),l.$on("close",()=>{var n;(n=e.onClose)==null||n.call(e),o("close")}),l.$on("closed",()=>{var n;(n=e.onClosed)==null||n.call(e),i(),r===l&&(r=null)}),l.$on("confirm",()=>{var n;(n=e.onConfirm)==null||n.call(e),o("confirm")}),l.$on("cancel",()=>{var n;(n=e.onCancel)==null||n.call(e),o("cancel")}),l.$on("route-change",()=>{i(),r===l&&(r=null)})}):Promise.resolve()}a.close=()=>{if(r!=null){const t=r;r=null,P.nextTick(()=>{t.show=!1})}};a.Component=h;a.install=function(t){t.use(h)};export{a as D};
