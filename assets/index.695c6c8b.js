import{R as o}from"./index.45eae9d1.js";import{F as h}from"./index.82a9b42b.js";import{I as d}from"./index.f132a8c2.js";import{c as m}from"./create.76c55e06.js";import{c}from"./relation.9e421618.js";import{t as u}from"./shared.3c77b8d8.js";/* empty css               */const f=e=>["normal","small","mini"].includes(e),p={value:{type:[String,Number],default:0},label:{type:[String,Number]},color:{type:String},count:{type:[Number,String],default:5},icon:{type:String,default:"star"},half:{type:Boolean,default:!1},size:{type:String,default:"normal",validator:f},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},ripple:{type:Boolean,default:!0},validateTrigger:{type:Array,default:()=>["onChange"]},rules:{type:Array}};const{createComponent:g,namespace:a}=m("rate"),_=g({props:p,mixins:[c("form",{parentKey:"form",childrenKey:"formComponents"})],directives:{Ripple:o},watch:{value:{handler(e){this.activeRate=u(e)},immediate:!0}},data:()=>({errorMessage:"",activeRate:0}),methods:{reset(){this.$emit("input",0),this.resetValidation()},validate(){this.$refs.formItem.validate()},resetValidation(){this.$refs.formItem.resetValidation()},nextTickValidateWithTrigger(e){this.$nextTick(()=>{var t;(t=this.$refs.formItem)==null||t.validateWithTrigger(this.validateTrigger,e,this.rules,this.value)})},handleErrorMessageChange(e){this.errorMessage=e},handleMouseenter(e){var t,r;((t=this.form)==null?void 0:t.disabled)||this.disabled||((r=this.form)==null?void 0:r.readonly)||this.readonly||(this.activeRate=e)},handleMouseleave(){this.activeRate=this.value},handleClick(e){var t,r;((t=this.form)==null?void 0:t.disabled)||this.disabled||(this.$emit("click",e),!(((r=this.form)==null?void 0:r.readonly)||this.readonly)&&(this.$emit("input",e),this.$emit("change",e),this.nextTickValidateWithTrigger("onChange")))},renderRate(e,t){var i;const r=this.$createElement;return r("div",{class:[a("__rate-item"),this.half?a("--half"):null,this.half?a(`--${this.size}-half-rate`):a(`--${this.size}-rate`)],on:{mouseenter:()=>this.handleMouseenter(e),click:()=>this.handleClick(e)}},[r(d,{class:[a("__rate"),a(`--${t}-rate`),this.activeRate>=e?a("--active"):null,((i=this.form)==null?void 0:i.disabled)||this.disabled?a("--disabled"):null,this.activeRate>=e&&this.errorMessage?a("--error"):null],style:{color:this.activeRate>=e?this.color:void 0},attrs:{"rate-cover":!0,name:this.icon}})])},renderRates(){const e=this.$createElement,t=Array.from({length:this.count}).map((r,i)=>{var l,n;const s=i+(this.half?.5:1);return e("div",{class:a("__rate-wrapper"),style:{color:this.color},directives:[{name:"ripple",value:{disabled:!this.ripple||((l=this.form)==null?void 0:l.disabled)||((n=this.form)==null?void 0:n.readonly)||this.disabled||this.readonly}}]},[this.renderRate(s,"left"),this.half&&this.renderRate(s+.5,"right")])});return e("div",{class:a("__rates"),on:{mouseleave:this.handleMouseleave}},[t])}},render(){const e=arguments[0],{label:t,value:r,rules:i,handleErrorMessageChange:s}=this;return e(h,{attrs:{"rate-cover":!0,label:t,value:r,rules:i},ref:"formItem",on:{"error-message-change":s}},[this.renderRates()])}});export{_ as R};
