import{c as T}from"./create.aa899411.js";import{i as v,a as f}from"./elements.43ed79a4.js";import{e as a,r as t}from"./shared.3ed6fcb1.js";import{c as p}from"./lock.6e857d47.js";/* empty css               *//* empty css                 */const M={height:{type:[String,Number]},right:{type:[String,Number]}},e=[],{namespace:o,createComponent:g}=T("scroller"),D=g({props:M,mixins:[p("mouseEnter","lockBody")],data:()=>({isMobile:!1,scrollY:0,maxScrollY:0,scrollViewTranslateY:0,transitionDuration:100,scrollbarRatio:0,mouseEnter:!1,touching:!1,touchY:0,lockBody:!0}),watch:{height(){this.resize()}},computed:{showScrollbar(){return!this.isMobile&&this.scrollbarRatio<1&&(this.touching||this.mouseEnter)}},mounted(){this.isMobile=v()},beforeDestroy(){document.removeEventListener("touchmove",this.handleTouchMove),document.removeEventListener("touchend",this.handleTouchend),document.removeEventListener("mousewheel",this.handleMouseWheel),a(e,this)},methods:{resize(){const{scroller:s}=this.$refs;this.scrollbarRatio=s.clientHeight/s.scrollHeight||0,this.lockBody=this.scrollbarRatio<1,this.maxScrollY=s.clientHeight-this.scrollbarRatio*s.clientHeight},getScrollTop(){return this.isMobile?this.$refs.scroller.scrollTop:this.scrollViewTranslateY},scrollTo(s){if(this.isMobile){this.$refs.scroller.scrollTop=s;return}this.scrollY=s*this.scrollbarRatio,this.scrollY=t(this.scrollY,0,this.maxScrollY),this.scrollViewTranslateY=this.scrollY/this.scrollbarRatio},scrollToTop(){if(this.isMobile){setTimeout(()=>{this.$refs.scroller.scrollTop=0});return}this.scrollY=0,this.scrollViewTranslateY=0},scrollUp(s){if(this.isMobile){this.$refs.scroller.scrollTop-=s;return}this.scrollY-=s*this.scrollbarRatio,this.scrollY=t(this.scrollY,0,this.maxScrollY),this.scrollViewTranslateY=this.scrollY/this.scrollbarRatio},scrollDown(s){if(this.isMobile){this.$refs.scroller.scrollTop+=s;return}this.scrollY+=s*this.scrollbarRatio,this.scrollY=t(this.scrollY,0,this.maxScrollY),this.scrollViewTranslateY=this.scrollY/this.scrollbarRatio},enableTransitionDuration(){this.transitionDuration=100},disableTransitionDuration(){this.transitionDuration=0},handleMouseEnter(){this.isMobile||(e.push(this),this.mouseEnter=!0,this.resize(),document.addEventListener("mousewheel",this.handleMouseWheel))},handleMouseWheel({deltaY:s}){e[e.length-1]===this&&(this.touching||(this.enableTransitionDuration(),this.scrollY+=s*this.scrollbarRatio,this.scrollY=t(this.scrollY,0,this.maxScrollY),this.scrollViewTranslateY=this.scrollY/this.scrollbarRatio))},handleMouseLeave(){this.mouseEnter=!1,a(e,this),document.removeEventListener("mousewheel",this.handleMouseWheel)},handleTouchstart(s){this.touching=!0,this.touchY=s.touches[0].clientY,document.addEventListener("touchmove",this.handleTouchMove),document.addEventListener("touchend",this.handleTouchend)},handleTouchMove(s){const{touchY:i}=this;this.disableTransitionDuration();const{clientY:l}=s.touches[0],r=l-i;this.touchY=l,this.scrollY+=r,this.scrollY=t(this.scrollY,0,this.maxScrollY),this.scrollViewTranslateY=this.scrollY/this.scrollbarRatio},handleTouchend(){this.touching=!1,document.removeEventListener("touchmove",this.handleTouchMove),document.removeEventListener("touchend",this.handleTouchend),this.enableTransitionDuration()}},render(){const s=arguments[0],{right:i,height:l,showScrollbar:r,isMobile:h,scrollbarRatio:c,scrollY:u,scrollViewTranslateY:m,transitionDuration:n,handleTouchstart:d,handleMouseEnter:Y,handleMouseLeave:b}=this;return s("div",{ref:"scroller",class:[o(),h?o("--mobile"):null],style:{maxHeight:f(l)},on:{mouseenter:Y,mouseleave:b}},[s("div",{class:o("__scroll-view"),style:{transform:h?void 0:`translateY(${-m}px)`,transition:h?void 0:`transform ${n}ms`}},[this.slots()]),s("transition",{attrs:{name:"scrollbar-fade"}},[s("div",{class:o("__scrollbar"),style:{right:i},directives:[{name:"show",value:r}]},[s("div",{class:o("__scrollbar-inner"),style:{height:`${c*100}%`,transition:`top ${n}ms`,top:`${u}px`},on:{touchstart:d}})])])])}});export{D as S};
