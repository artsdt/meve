var $=Object.defineProperty;var u=Object.getOwnPropertySymbols;var x=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;var d=(t,e,i)=>e in t?$(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,m=(t,e)=>{for(var i in e||(e={}))x.call(e,i)&&d(t,i,e[i]);if(u)for(var i of u(e))k.call(e,i)&&d(t,i,e[i]);return t};import{S as w}from"./index.4e777949.js";import{c}from"./create.af6e9796.js";import{a as v,c as y}from"./relation.9e421618.js";import{b as T}from"./shared.285cd5cf.js";import{l as p}from"./animation.106839c4.js";import{s as f}from"./elements.aa4184a2.js";/* empty css               */import{R as B}from"./index.45eae9d1.js";import{S as z,a as I}from"./index.e614f759.js";const b=t=>["horizontal","vertical"].includes(t),N={value:{type:[String,Number],default:0},layoutDirection:{type:String,default:"horizontal",validator:b},itemDirection:{type:String,default:"horizontal",validator:b},activeColor:{type:String},activeBackground:{type:String},inactiveColor:{type:String},inactiveBackground:{type:String},disabledColor:{type:String},disabledBackground:{type:String},sticky:{type:Boolean,default:!1},offsetTop:{type:[String,Number],default:0}};const{createComponent:D,namespace:l}=c("tabs"),Q=D({mixins:[v("tabs")],props:N,data:()=>({scrollable:!1}),watch:{children(){this.$nextTick(()=>{this.resize()})},value(){this.resize()}},mounted(){window.addEventListener("resize",this.resize)},beforeDestroy(){window.removeEventListener("resize",this.resize)},methods:{matchName(){return this.children.find(({name:t})=>this.value===t)},matchIndex(){return this.children.find(({index:t})=>this.value===t)},matchBoundary(){const{length:t}=this.children;if(t===0)return;const{value:e}=this;return T(e)&&(e>t-1?this.$emit("input",t-1):this.$emit("input",0)),this.matchIndex()},watchScrollable(){this.scrollable=this.children.length>=5},scrollToCenter(t){if(!this.scrollable)return;const{scroller:e}=this.$refs,i=t.$refs.tab;if(this.layoutDirection==="horizontal"){const s=i.offsetLeft+i.offsetWidth/2-e.offsetWidth/2;f(e,{left:s,animation:p})}else{const s=i.offsetTop+i.offsetHeight/2-e.offsetHeight/2;f(e,{top:s,animation:p})}},resize(){const t=this.matchName()||this.matchIndex()||this.matchBoundary();!t||t.disabled||(this.watchScrollable(),this.scrollToCenter(t),this.sticky&&this.$refs.sticky.handleScroll())},onTabClick(t){var s;const e=(s=t.name)!=null?s:t.index,{value:i}=this;this.$emit("click",e),this.$emit("input",e),e!==i&&this.$emit("change",e)},renderTabs(){const t=this.$createElement;return t("div",{class:[l(),"m--box",l(`--item-${this.itemDirection}`)],attrs:m({},this.$attrs)},[t("div",{ref:"scroller",class:[l("__tab-wrap"),l(`--layout-${this.layoutDirection}`),this.scrollable?l(`--layout-${this.layoutDirection}-scrollable`):null]},[this.slots()])])}},render(){const t=arguments[0],{sticky:e,offsetTop:i}=this;return e?t(w,{ref:"sticky",attrs:{offsetTop:i}},[this.renderTabs()]):this.renderTabs()}}),P={name:{type:[String,Number]},disabled:{type:Boolean,default:!1}};const{createComponent:V,namespace:n}=c("tab"),U=V({mixins:[y("tabs")],directives:{Ripple:B},props:P,data:()=>({scrollable:!1}),computed:{last(){var t;return((t=this.parent)==null?void 0:t.children.length)===this.index+1},first(){return this.index===0}},watch:{name(){var t;(t=this.parent)==null||t.resize()},disabled(){var t;(t=this.parent)==null||t.resize()}},methods:{computeColorStyle(){if(!this.parent)return;const{disabled:t,name:e,index:i}=this,{disabledColor:s,activeColor:a,inactiveColor:o,value:r}=this.parent;return t?s:r===e||r===i?a:o},computeBackgroundStyle(){const{disabled:t,name:e,index:i}=this;if(!this.parent)return;const{disabledBackground:s,activeBackground:a,inactiveBackground:o,value:r}=this.parent;return t?s:r===e||r===i?a:o},computeColorClass(){const{disabled:t,name:e,index:i}=this;if(!this.parent)return;const{value:s}=this.parent;return n(t?"--disabled":s===e||s===i?"--active":"--inactive")},computeClearMargin(){var s;const{first:t,last:e}=this,{layoutDirection:i}=(s=this.parent)!=null?s:{};return i==="vertical"?[t?n("--clear-margin-top"):null,e?n("--clear-margin-bottom"):null]:[t?n("--clear-margin-left"):null,e?n("--clear-margin-right"):null]},handleClick(t){var a;const{disabled:e,name:i,index:s}=this;e||(this.$emit("click",i!=null?i:s,t),(a=this.parent)==null||a.onTabClick(this))}},render(){var h;const t=arguments[0],{disabled:e,computeColorClass:i,computeColorStyle:s,computeBackgroundStyle:a,computeClearMargin:o,handleClick:r}=this,{itemDirection:C,layoutDirection:S}=(h=this.parent)!=null?h:{};return t("div",{ref:"tab",class:[n(),"m--box",n(`--${S}-margin`),...o()],on:{click:r}},[t("div",{class:[n("__content"),i(),n(`--${C}`)],style:{color:s(),background:a()},directives:[{name:"ripple",value:{disabled:e}}]},[this.slots()])])}}),E={value:{type:[String,Number],default:0},canSwipe:{type:Boolean,default:!0},loop:{type:Boolean,default:!1}},{createComponent:M,namespace:_}=c("tabs-items"),X=M({mixins:[v("tabsItems")],props:E,watch:{value(t){this.handleValueChange(t)},children(){this.handleValueChange(this.value)}},methods:{matchName(t){return this.children.find(({name:e})=>t===e)},matchIndex(t){return this.children.find(({index:e})=>t===e)},matchValue(t){return this.matchName(t)||this.matchIndex(t)},handleValueChange(t){const e=this.matchValue(t);!e||(this.children.forEach(({setCurrent:i})=>i(!1)),e.setCurrent(!0),this.$refs.swipe.to(e.index))},handleSwipeChange(t){var s;const e=this.children.find(({index:a})=>a===t),i=(s=e.name)!=null?s:e.index;this.$emit("input",i)}},render(){return arguments[0](z,{ref:"swipe",class:_(),attrs:{loop:this.loop,touchable:this.canSwipe,indicator:!1},on:{change:this.handleSwipeChange}},[this.slots()])}}),L={name:{type:[String,Number]}};const{createComponent:H,namespace:g}=c("tab-item"),Y=H({mixins:[y("tabsItems")],props:L,data:()=>({current:!1,initSlot:!1}),methods:{setCurrent(t){!this.initSlot&&t&&(this.initSlot=!0),this.current=t}},render(){return arguments[0](I,{attrs:{"tab-item-cover":!0},class:[g(),this.current?null:g("--inactive")]},[this.initSlot&&this.slots()])}});export{Q as T,U as a,X as b,Y as c};
