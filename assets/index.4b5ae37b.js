import{c as v}from"./create.af6e9796.js";import{i as b,a as f}from"./elements.aa4184a2.js";import{e as c,r as e}from"./shared.285cd5cf.js";import{c as T}from"./lock.38aa06a4.js";/* empty css               */const p={height:{type:[String,Number]}};const o=[],{namespace:l,createComponent:M}=v("scroller"),x=M({props:p,mixins:[T("mouseEnter")],data:()=>({isMobile:!1,scrollY:0,maxScrollY:0,scrollViewTranslateY:0,transitionDuration:0,scrollbarRatio:0,mouseEnter:!1,touching:!1,touchY:0}),watch:{height(){this.resize()}},computed:{showScrollbar(){return!this.isMobile&&this.scrollbarRatio<1&&(this.touching||this.mouseEnter)}},mounted(){this.isMobile=b()},beforeDestroy(){document.removeEventListener("touchmove",this.handleTouchMove),document.removeEventListener("touchend",this.handleTouchend),document.removeEventListener("mousewheel",this.handleMouseWheel),c(o,this)},methods:{resize(){const{scroller:s}=this.$refs;this.scrollbarRatio=s.clientHeight/s.scrollHeight||0,this.maxScrollY=s.clientHeight-this.scrollbarRatio*s.clientHeight},getScrollTop(){return this.isMobile?this.$refs.scroller.scrollTop:this.scrollViewTranslateY},scrollTo(s){if(this.isMobile){this.$refs.scroller.scrollTop=s;return}this.scrollY=s*this.scrollbarRatio,this.scrollY=e(this.scrollY,0,this.maxScrollY),this.scrollViewTranslateY=this.scrollY/this.scrollbarRatio},scrollToTop(){if(this.isMobile){setTimeout(()=>{this.$refs.scroller.scrollTop=0});return}this.scrollY=0,this.scrollViewTranslateY=0},scrollUp(s){if(this.isMobile){this.$refs.scroller.scrollTop-=s;return}this.scrollY-=s*this.scrollbarRatio,this.scrollY=e(this.scrollY,0,this.maxScrollY),this.scrollViewTranslateY=this.scrollY/this.scrollbarRatio},scrollDown(s){if(this.isMobile){this.$refs.scroller.scrollTop+=s;return}this.scrollY+=s*this.scrollbarRatio,this.scrollY=e(this.scrollY,0,this.maxScrollY),this.scrollViewTranslateY=this.scrollY/this.scrollbarRatio},handleMouseEnter(){this.isMobile||(o.push(this),this.mouseEnter=!0,this.resize(),document.addEventListener("mousewheel",this.handleMouseWheel))},handleMouseWheel({deltaY:s}){o[o.length-1]===this&&(this.touching||(this.transitionDuration=100,this.scrollY+=s*this.scrollbarRatio,this.scrollY=e(this.scrollY,0,this.maxScrollY),this.scrollViewTranslateY=this.scrollY/this.scrollbarRatio))},handleMouseLeave(){this.mouseEnter=!1,c(o,this),document.removeEventListener("mousewheel",this.handleMouseWheel)},handleTouchstart(s){this.touching=!0,this.touchY=s.touches[0].clientY,document.addEventListener("touchmove",this.handleTouchMove),document.addEventListener("touchend",this.handleTouchend)},handleTouchMove(s){const{touchY:r}=this;this.transitionDuration=0;const{clientY:i}=s.touches[0],t=i-r;this.touchY=i,this.scrollY+=t,this.scrollY=e(this.scrollY,0,this.maxScrollY),this.scrollViewTranslateY=this.scrollY/this.scrollbarRatio},handleTouchend(){this.touching=!1,document.removeEventListener("touchmove",this.handleTouchMove),document.removeEventListener("touchend",this.handleTouchend)}},render(){const s=arguments[0],{height:r,showScrollbar:i,isMobile:t,scrollbarRatio:n,scrollY:a,scrollViewTranslateY:u,transitionDuration:h,handleTouchstart:m,handleMouseEnter:d,handleMouseLeave:Y}=this;return s("div",{ref:"scroller",class:[l(),t?l("--mobile"):null],style:{maxHeight:f(r)},on:{mouseenter:d,mouseleave:Y}},[s("div",{class:l("__scroll-view"),style:{transform:t?void 0:`translateY(${-u}px)`,transition:t?void 0:`transform ${h}ms`}},[this.slots()]),s("transition",{attrs:{name:"scrollbar-fade"}},[s("div",{class:l("__scrollbar"),directives:[{name:"show",value:i}]},[s("div",{class:l("__scrollbar-inner"),style:{height:`${n*100}%`,transition:`top ${h}ms`,top:`${a}px`},on:{touchstart:m}})])])])}});export{x as S};
